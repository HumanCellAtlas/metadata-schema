{
   "$schema" : "http://json-schema.org/draft-04/schema#",
   "id": "http://schema.humancellatlas.org/types/analysis/4.0.0/analysis.json",
   "additionalProperties" : false,
   "required" : [
     "timestamp_start_utc",
     "timestamp_stop_utc",
     "computational_method",
     "input_bundles",
     "reference_bundle",
     "analysis_id",
     "analysis_run_type",
     "metadata_schema",
     "tasks",
     "inputs",
     "outputs"
   ],
   "title" : "analysis",
   "properties" : {
       "$schema" : {
         "pattern" : "http://schema.humancellatlas.org/types/analysis/[0-9]{1,}.[0-9]{1,}.[0-9]{1,}/analysis.json",
         "type": "string"
      },
      "tasks" : {
         "description" : "Descriptions of tasks in the workflow.",
         "type" : "array",
         "items" : {
            "type" : {
               "$ref" : "analysis.json#/definitions/task"
            }
         }
      },
      "analysis_id" : {
         "description" : "A unique ID for this analysis.",
         "type" : "number"
      },
      "name": {
         "description": "A short, descriptive name for the analysis that need not be unique.",
         "type": "string"
      },
      "description": {
         "description": "A general description of the analysis.",
         "type": "string"
      },
      "computational_method" : {
         "description" : "A URI to a versioned workflow and versioned execution environment in a GA4GH-compliant repository.",
         "type" : "uri"
      },
      "outputs" : {
         "items" : {
            "type" : {
               "$ref" : "analysis.json#/definitions/file"
            }
         },
         "description" : "Output generated by the pipeline run.",
         "type" : "array"
      },
      "input_bundles" : {
         "items" : {
            "type" : "uri"
         },
         "description" : "The input bundles used in this analysis run.",
         "type" : "array"
      },
      "timestamp_stop_utc" : {
         "type" : "date-time",
         "description" : "Terminal stop time of the full pipeline."
      },
      "metadata_schema" : {
         "description" : "The version of the metadata schemas used for the json files.",
         "type" : "string"
      },
      "timestamp_start_utc" : {
         "description" : "Initial start time of the full pipeline.",
         "type" : "date-time"
      },
      "inputs" : {
         "items" : {
            "type" : {
               "$ref" : "analysis.json#/definitions/parameter"
            }
         },
         "type" : "array",
         "description" : "Input parameters used in the pipeline run, these can be files or string values (settings)."
      },
      "analysis_run_type" : {
         "enum" : [
            "run",
            "copy-forward"
         ],
         "description" : "Indicator of whether the analysis actually ran or was just copied forward as an optimization.",
         "type" : "string"
      },
      "reference_bundle" : {
         "description" : "Bundle containing the reference used in running the pipeline.",
         "type" : "uri"
      }
   },
   "definitions" : {
      "file" : {
         "additionalProperties" : false,
         "required" : [
            "checksum",
            "file_path",
            "format"
         ],
         "properties" : {
            "format" : "string",
            "file_path" : "uri",
            "checksum" : "string"
         },
         "type" : "object"
      },
      "task" : {
         "properties" : {
            "start_time" : "date-time",
            "stop_time" : "date-time",
            "name" : "string",
            "log_err" : "uri",
            "log_out" : "uri",
            "disk_size" : "string",
            "docker_image" : "string",
            "cpus" : "int",
            "memory" : "string",
            "zone" : "string"
         },
         "required" : [
            "name",
            "start_time",
            "stop_time",
            "log",
            "disk_size",
            "docker_image",
            "cpus",
            "memory",
            "zone"
         ],
         "additionalProperties" : false,
         "type" : "object"
      },
      "parameter" : {
         "additionalProperties" : false,
         "required" : [
            "name",
            "value"
         ],
         "properties" : {
            "checksum" : "string",
            "value" : "string",
            "name" : "string"
         },
         "type" : "object"
      }
   },
   "type" : "object"
}
