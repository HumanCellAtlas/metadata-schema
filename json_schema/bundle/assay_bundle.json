{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id" : "http://schema.humancellatlas.org/bundle/4.0.0/assay_bundle.json",
  "description": "A schema for an assay bundle" ,
  "properties": {
    "$schema" : {
            "pattern" : "http://schema.humancellatlas.org/bundle/[0-9]{1,}.[0-9]{1,}.[0-9]{1,}/assay_bundle.json",
            "type": "string"
    }
  },
  "definitions" : {
    "assay_ingest" : {
      "type": "object",
      "required": ["hca_ingest", "content"],
      "properties": {
        "hca_ingest": {
          "$ref": "ingest.json",
          "description": "core fields added by HCA ingest service",
          "type": "object"
        },
        "content": {
          "$ref": "assay.json",
          "description": "Assay content",
          "type": "object"
        },
        "derivation_protocols": {
          "items": {
            "$ref": "protocol.json",
            "description": "An array of protocols used in derivation of this sample."
          },
          "type": "array"
        }
      }
    }
  },
  "items": {
    "$ref": "assay_bundle.json#/definitions/assay_ingest"
  },
  "type": "array"
}